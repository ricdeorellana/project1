<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
	crossorigin="anonymous">
<title>Edit Request</title>
</head>
<body onload="allInfo()">
    <div class="container text-center">
<h1>Approve or Reject</h1>
<div id="Request"></div>
<br>
<button onclick="approve()" type="button" class="btn btn-success btn-lg">Approve</button>
<button onclick="reject()" type="button" class="btn btn-lg btn-danger">Reject</button>

<br>
<br>
<button class="btn btn-secondary" onclick="window.location.href='http://localhost:8080/Project1/requestapproval.html'">Back to Requests</button>
<button class="btn btn-secondary" onclick="window.location.href='http://localhost:8080/Project1/homepage.html'">Back to Home</button>
</div>
</body>
<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
		crossorigin="anonymous"></script>
<script src="singlereq.js"></script>
<script src="session.js"></script>
<script> function allInfo(){
    sessInfo();
    seshInfo();
}

</script>

<script>
function approve(){
       if(user.role == 1){
        input.grade = 8;
       }
       if(user.role == 2){
        input.grade = 9;
       }
       if(user.role == 3){
        input.grade = 10;
       }

        let xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if(this.readyState == 4 && this.status == 200){
                console.log(input);
                window.confirm("Request Approved Successfully!");
            }
           
        };
        xhttp.open("POST", "http://localhost:8080/Project1/updateRequest.do", true);
        xhttp.setRequestHeader('Content-Type', 'application.json');
        xhttp.send(JSON.stringify(input));
    }

</script>

<script>
    function reject(){
        input.grade = 11;

        let xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if(this.readyState == 4 && this.status == 200){
                console.log(input);
                window.confirm("Request Rejected.");
            }
           
        };
        xhttp.open("POST", "http://localhost:8080/Project1/updateRequest.do", true);
        xhttp.setRequestHeader('Content-Type', 'application.json');
        xhttp.send(JSON.stringify(input));

    }
</script>
</html>